<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Lesson 14: Inspecting the Schema</title>
    <link rel="StyleSheet" href="css/lesson14.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body class="" style="">
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <div style="text-align: left;">
      <table cellspacing="0" summary="">
        <tr>
          <td>
            <a href="lesson13.html"><img src="images/prev.gif" alt="Previous" border="0" /></a>
          </td>
          <!-- Jen: Added following lines for start.gif in navBar  -->
          <td>
            <a href="Tutorial.html"><img src="images/start.gif" alt="Previous" border="0" /></a>
          </td>
          <!-- Jen: End added lines  -->
          <td>
            <a href="lesson15.html"><img src="images/next.gif" alt="Next" border="0" /></a>
          </td>
        </tr>
      </table>
    </div>
    <hr align="left" />
    <!-- Jen: Changed blockquote to div on line below -->
    <div>
      <div class="ChapNoNum"><a name="1163932">Lesson 14: Inspecting the Schema</a></div>
      <div class="Body"><a name="1163934">A federated database’s</a><span class="Term"> schema</span> describes the types of data that can be stored persistently in that federated database. The schema contains a description of every persistence-capable class defined by the applications that access the federated database. Every persistent object in the federated database is an instance of one of the classes described in the schema.</div>
      <div class="Body"><a name="1164505">I</a>n the FD Project Explorer:</div>
      <div class="NumFirst_outer" style="margin-left: 72pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumFirst_inner" style="width: 18pt; white-space: nowrap;">
                <span class="zNumbers">1.&nbsp;&nbsp;&nbsp;&nbsp;</span>
              </div>
            </td>
            <td width="100%">
              <div class="NumFirst_inner"><a name="1166845">Make sure </a><span class="Bold">Federated Database (</span><span class="Bold">Rental</span><span class="Bold">Company</span><span class="Bold">)</span> is expanded. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumNext_outer" style="margin-left: 72pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumNext_inner" style="width: 18pt; white-space: nowrap;">
                <span class="zNumbers">2.&nbsp;&nbsp;&nbsp;&nbsp;</span>
              </div>
            </td>
            <td width="100%">
              <div class="NumNext_inner"><a name="1167351">Click to expand </a><span class="Bold">+Schema</span> and then click again to expand <span class="Bold">+Namespace</span><span class="Bold"> </span><span class="Bold">(</span><span class="Bold">FleetData)</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Indented1"><a name="1167398">The FD Project Explorer lists the classes in the schema in alphabetical order </a>by classname.</div>
      <div class="Anchor"><a name="1164509"><img class="Default" src="images/scrnInspectSchema_1.jpg" width="274" height="284" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
      <div class="NumNext_outer" style="margin-left: 72pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumNext_inner" style="width: 18pt; white-space: nowrap;">
                <span class="zNumbers">3.&nbsp;&nbsp;&nbsp;&nbsp;</span>
              </div>
            </td>
            <td width="100%">
              <div class="NumNext_inner"><a name="1167356">Double-click </a><span class="Bold">Namespace</span><span class="Bold"> </span><span class="Bold">(FleetData)</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Indented1"><a name="1167435">The editor area shows an overview of the </a>schema, including a table of classes in the FleetData namespace.</div>
      <div class="Anchor"><a name="1164861"><img class="Default" src="images/scrnInspectSchema_2.jpg" width="686" height="416" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
      <div class="Body"><span class="Bold"><a name="1167709">Note:</a></span> The size of classes vary based on whether you are using a 32 or 64-bit operating system.</div>
      <div class="Body"><a name="1167715">Every class in the table is </a><span class="Term">persistence-capable</span>. The classes in this particular example inherit their persistence behavior from the Objectivity/DB class <span class="Code">ooObj</span>. </div>
      <div class="Body"><a name="1163955">I</a>n the example federated database, all of the application-defined classes are defined in a single <span class="Term">s</span><span class="Term">chema namespace</span>. Schema namespaces correspond to C++ or .NET/C# namespaces, or Java packages; a schema namespace therefore represents the qualifiers, if any, in a fully-qualified class name. </div>
      <div class="Body"><a name="1168591">A federated database’s schema also has a </a><span class="Term">d</span><span class="Term">efault</span> schema namespace for classes whose names have no qualifiers. Such classes might be defined in a C++ application’s global (unnamed) namespace.</div>
      <div class="Body"><a name="1168606">By default, Assist shows only application-defined classes, and suppresses the </a>display of system-defined classes (classes defined by Objectivity/DB, such as <span class="Code">ooObj</span>).</div>
      <div class="Head1"><a name="1163956">Schema creation</a></div>
      <div class="Body"><a name="1163957">When a federated database is created, its schema contains only descriptions of </a>system-defined classes. Before an application can store instances of its own classes in a federated database, descriptions of these application-defined classes must be added to the federated database’s schema.</div>
      <div class="Body"><a name="1163958">You can add class descriptions to a schema in several ways. For example, you </a>can generate schema descriptions from the class definitions in your application code:</div>
      <div class="Bullet1_outer" style="margin-left: 72pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bullet1_inner" style="width: 18pt; white-space: nowrap;">■</div>
            </td>
            <td width="100%">
              <div class="Bullet1_inner"><a name="1163962">When developing with </a>Objectivity/C++, you can define classes using the Objectivity/C++ Data Definition Language (DDL). You then use the Objectivity/DDL preprocessor to add the classes to the schema.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bullet1_outer" style="margin-left: 72pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bullet1_inner" style="width: 18pt; white-space: nowrap;">■</div>
            </td>
            <td width="100%">
              <div class="Bullet1_inner"><a name="1163975">When developing with </a>Objectivity for Java, you define classes using your programming language. The first time you make an instance of a class persistent, the class is added to the schema automatically.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bullet1_outer" style="margin-left: 72pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bullet1_inner" style="width: 18pt; white-space: nowrap;">■</div>
            </td>
            <td width="100%">
              <div class="Bullet1_inner"><a name="1166921">When developing with </a>Objectivity/.NET for C#, you define classes and add them to the schema using the Objectivity/DB Persistence Designer, which is a plugin to Microsoft Visual Studio.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="1163976">If you prefer to create your schema before you start programming in </a>Objectivity/C++ or Objectivity for Java, you can use Assist to define classes and add them to the schema. You then use Assist to generate code files suitable for compiling with your applications. </div>
      <div class="Body"><a name="1163986">In this tutorial, you will use </a>Assist to inspect existing descriptions in the schema. Later tutorials will show how to create class descriptions and incorporate them into an application.</div>
      <div class="Head1"><a name="1163987">Class descriptions</a></div>
      <div class="Body"><a name="1163988">Earlier in this tutorial, we saw instances of the class Car. Now let’s look at the </a>class itself.</div>
      <div class="NumFirst_outer" style="margin-left: 72pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumFirst_inner" style="width: 18pt; white-space: nowrap;">
                <span class="zNumbers">1.&nbsp;&nbsp;&nbsp;&nbsp;</span>
              </div>
            </td>
            <td width="100%">
              <div class="NumFirst_inner"><a name="1167375">In the editor for the schema, double-click the C symbol next to the </a><span class="Bold">Car</span> class.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Indented1"><a name="1166882">The editor area displays the schema description of the Car class. The General </a>information box shows the class’s name and its <span class="Term">type number</span>. Objectivity/DB assigns every class in the schema a unique type number. </div>
      <div class="Indented1"><a name="1166876">The table of Base Classes shows that the class Car inherits from the </a>persistence-capable class FleetData.Vehicle. </div>
      <div class="Anchor"><a name="1164888"><img class="Default" src="images/scrnInspectSchema_3.jpg" width="511" height="345" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
      <div class="NumNext_outer" style="margin-left: 72pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumNext_inner" style="width: 18pt; white-space: nowrap;">
                <span class="zNumbers">2.&nbsp;&nbsp;&nbsp;&nbsp;</span>
              </div>
            </td>
            <td width="100%">
              <div class="NumNext_inner"><a name="1167394">Double-click on the base class </a><span class="Bold">FleetData.V</span><span class="Bold">ehicle</span> to see its class description. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Indented1"><a name="1166865">Notice that class Vehicle is persistence-capable because it inherits from </a><span class="Code">ooObj</span>.</div>
      <div class="Anchor"><a name="1164920"><img class="Default" src="images/scrnInspectSchema_4.jpg" width="512" height="363" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
      <div class="Indented1"><a name="1166233">Now look at the Members table in the description of the Vehicle class. The </a>table of Members shows each attribute’s name, type, and visibility (public, protected, private). For example, this class defines a string attribute called <span class="Bold">li</span><span class="Bold">cense</span>, a Boolean attribute called <span class="Bold">av</span><span class="Bold">ailable</span>, and (you may need to scroll down) a reference attribute called <span class="Bold">currentRental</span>. </div>
      <div class="Anchor"><a name="1166667"><img class="Default" src="images/scrnInspectSchema_4b.jpg" width="522" height="201" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
      <div class="Indented1"><a name="1166235">The table of Members shows relationships as either To-One or To-Many in </a>the Type column. When you select a relationship, various properties of the relationship’s definition are displayed as Additional Member Properties to the right of the table. </div>
      <div class="NumNext_outer" style="margin-left: 72pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumNext_inner" style="width: 18pt; white-space: nowrap;">
                <span class="zNumbers">3.&nbsp;&nbsp;&nbsp;&nbsp;</span>
              </div>
            </td>
            <td width="100%">
              <div class="NumNext_inner"><a name="1166902">Click the </a>To-Many relationship called <span class="Bold">rentalHistory</span>. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Indented1"><a name="1166903">Notice the Referenced Class is </a><span class="Bold">FleetData.RentalContract</span>, which means that every instance of class Vehicle (that is, every instance of Car or Truck) can be related to 0 or more instances of class RentalContract.</div>
      <div class="Anchor"><a name="1166675"><img class="Default" src="images/scrnInspectSchema_4c.jpg" width="381" height="428" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
      <div class="Body"><a name="1164000">Some properties describe how the relationship is physically stored. Other </a>properties describe how operations such as deleting, and locking affect the objects linked through this relationship. Still other properties describe the visibility and naming of the <span class="Term">get</span> and <span class="Term">set</span> methods. For more information, see the documentation for your Objectivity programming interface.</div>
      <div class="Head1"><a name="1164004">Language independence</a></div>
      <div class="Body"><a name="1164008">Schema descriptions are language-independent. For this reason, </a>Assist displays attribute types with descriptive names such as String rather than the actual language-specific names used in an application. </div>
      <div class="Body"><a name="1164009">Because the schema is language-independent, applications written in different </a>languages can interoperate with the same federated database. For example:</div>
      <div class="Bullet1_outer" style="margin-left: 72pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bullet1_inner" style="width: 18pt; white-space: nowrap;">■</div>
            </td>
            <td width="100%">
              <div class="Bullet1_inner"><a name="1164013">Persistent objects created by an </a>Objectivity for Java application can be read and updated by an Objectivity/C++ application.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bullet1_outer" style="margin-left: 72pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bullet1_inner" style="width: 18pt; white-space: nowrap;">■</div>
            </td>
            <td width="100%">
              <div class="Bullet1_inner"><a name="1164020">Persistent objects created by an </a>Objectivity/C++ application can be read and updated by an Objectivity for Java application. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="1164024">Interoperability has a few limits due to programming-language differences. For </a>example, an Objectivity/C++ application can define a persistence-capable class with multiple immediate base classes. Because the Java language does not permit multiple inheritance, a corresponding class cannot be defined by any Objectivity for Java application. Consequently, only an Objectivity/C++ application can create or access persistent objects of a class with multiple immediate bases classes.</div>
      <div class="Body"><a name="1164037">Similarly, an </a>Objectivity/C++ application can define a persistence-capable class with attributes that directly embed instances of other C++ classes. Because the Java language has no way to embed one instance within the data of another, a corresponding class cannot be defined by any Objectivity for Java application. Consequently, only an Objectivity/C++ application can create or access persistent objects of a class with embedded instances of other classes.</div>
      <div class="Head1"><a name="1164044">Schema evolution</a></div>
      <div class="Body"><a name="1168269">Once created, a schema can be changed</a>—for example, to add attributes or relationships to a class description in response to new application requirements. Changing a schema is called <span class="Term">schema evolution</span>. You typically perform schema evolution through your Objectivity programming interface or through one of the Objectivity/DB Active Schema interfaces. </div>
      <div class="Body"><a name="1168279">Y</a>ou can also use Assist to quickly perform many kinds of schema-evolution operations in a federated database. Assist has buttons for adding, deleting, and moving base classes, attributes, and relationships. You can change any value displayed in curly braces. For example, you could change the visibility of an attribute from {private} to {public}. </div>
      <div class="Body"><a name="1164059">Changing a persistence-capable class gives it a new </a><span class="Term">shape</span>, which describes how the class’s persistent instances are laid out in storage. The schema description of an evolved class has one or more past shapes, in addition to the current shape. </div>
      <div class="Body"><a name="1164060">Schema evolution must be performed with care in a production federated </a>database. Evolving a persistence-capable class in a schema may prevent an application from accessing existing objects of the class until you recompile it with the new class definition. Furthermore, you may need to write a utility application to help <span class="Emphasis">convert</span> existing objects of the class to their new shape—for example, to initialize a new attribute with the combined values of several deleted attributes. You can read about schema evolution and object conversion in the documentation for your programming interface.</div>
      <div class="Body"><a name="1167480"> </a></div>
    </div>
    <hr align="left" />
    <div style="text-align: left;">
      <table cellspacing="0" summary="">
        <tr>
          <td>
            <a href="lesson13.html"><img src="images/prev.gif" alt="Previous" border="0" /></a>
          </td>
          <!-- Jen: Added following lines for start.gif in navBar  -->
          <td>
            <a href="Tutorial.html"><img src="images/start.gif" alt="Previous" border="0" /></a>
          </td>
          <!-- Jen: End added lines  -->
          <td>
            <a href="lesson15.html"><img src="images/next.gif" alt="Next" border="0" /></a>
          </td>
        </tr>
      </table>
    </div>
    <table align="left" summary="">
      <tr>
        <td class="WebWorks_Company_Name_Bottom">
          <a href="./Copyright.html" target="external_window">Copyright © 2012, Objectivity, Inc. All rights reserved.</a>
        </td>
      </tr>
    </table>
  </body>
</html>