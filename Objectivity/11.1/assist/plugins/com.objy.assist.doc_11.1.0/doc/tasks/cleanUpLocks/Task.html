<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>New Page 1</title>
</head>

<body>

<h2>Cleaning up locks</h2>
<p>When a process is operating on persistent objects, it creates journal files. 
The journal files are needed when the transaction needs to be aborted. They 
contain all the information necessary to restore the database to a consistent 
state, and also how to release the locks that were acquired.<br>
<br>
Even in the event of a power outage, it should be possible to recover a 
transaction in process, as long as the journal files are available.<br>
<br>
For this reason, it is important to understand that journal files should never 
be deleted, and when you see some left behind by a process which is no longer 
running, this is an indication that a cleanup may be necessary.<br>
<br>
Objectivity has an administrative tool called oocleanup which can be used to 
roll back transactions which were left behind by dead processes. The simplest 
way to run it is <br>
<br>
oocleanup -local bootfile <br>
<br>
The output should look like:<br>
<br>
oocleanup -local test.boot<br>
<br>
<br>
Objectivity/DB (TM) Transaction Recovery Utility, Version 7.1<br>
<br>
Copyright (c) Objectivity, Inc 1991, 2002. All rights reserved.<br>
<br>
Recovering local transactions for FD &quot;test.boot&quot; on host &quot;brain&quot;.<br>
<br>
There are no active transactions for FD &quot;test.boot&quot;.<br>
<br>
Finished attempting to recover all specified transactions.<br>
&nbsp;</p>

</body>

</html>
